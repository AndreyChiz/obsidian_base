объекты создаются по типу [[PyObject]] - это базовая структура данных, используемая в реализации интерпретатора Python для представления всех объектов. 

Обычно пространство имен класса в Python реализуется в виде словаря (структуры данных `dict`). Каждый атрибут класса, включая методы, представлен как элемент словаря, где ключами являются имена атрибутов, а значениями - соответствующие объекты (функции, данные и т.д.).

1. **Выделение памяти:**
   При создании объекта на основе класса Python выделяет блок памяти из пула памяти, называемого "кучей" (heap). Размер выделяемой памяти зависит от размера данных объекта, его типа и структуры.

2. **Заголовок объекта:**
   На начало выделенного блока памяти помещается заголовок объекта, который содержит метаданные:
   - Тип объекта: Указывает, к какому классу принадлежит объект. Это позволяет интерпретатору понимать, какие методы и атрибуты доступны для объекта.
   - Счетчик ссылок: Каждый объект имеет счетчик ссылок, который отслеживает, сколько ссылок указывают на этот объект. Когда счетчик ссылок становится равным нулю, объект подлежит сборке мусора.
   - Размер объекта: Интерпретатор может использовать эту информацию для управления распределением памяти.

3. **Поля объекта:**
   Значения полей объекта размещаются после заголовка. В зависимости от структуры объекта, каждое поле может занимать разное количество байтов. Поля могут быть как простыми типами данных (числа, строки и т.д.), так и ссылками на другие объекты.

4. **Методы и ссылки на методы:**
   Методы класса обычно не хранятся в каждом объекте. Они хранятся в классе, а объект хранит ссылку на свой класс. Доступ к методам осуществляется через класс объекта.

5. **Индексация и доступ:**
   Доступ к данным осуществляется с использованием смещений и указателей. При обращении к атрибуту объекта, интерпретатор использует смещение от начала блока памяти для доступа к значению. Для последовательных типов (списки, строки) данные хранятся в последовательности, и доступ к элементам осуществляется по индексам.

6. **Сборка мусора:**
   Интерпретатор следит за счетчиками ссылок объектов. Когда счетчик ссылок объекта становится равным нулю (то есть объект больше не используется), интерпретатор знает, что объект можно удалить. Сборщик мусора (Garbage Collector) освобождает память, занятую этими объектами.

7. **Управление памятью:**
   Python использует сложные механизмы управления памятью, включая пул памяти для мелких объектов, циклические ссылки и кэширование объектов для оптимизации.

----

##  Выделение памяти 

1. **Пул памяти и аллокаторы:** Операционные системы предоставляют программам области памяти, называемые "пулами" или "кучами". Аллокаторы - это компоненты, управляющие выделением и освобождением блоков памяти в этих областях. Когда создается объект в Python, интерпретатор использует аллокаторы для выделения блока памяти под этот объект.
    
2. **Выбор размера блока:** Размер блока памяти, который выделяется под объект, может зависеть от нескольких факторов, таких как тип объекта, его структура и выравнивание. Выравнивание - это требование, чтобы адрес начала блока памяти был кратен определенному значению (обычно размеру байта).
    
3. **Фрагментация:** Пул памяти может разделиться на свободные и занятые блоки. Время от времени могут возникнуть фрагменты - свободные блоки между занятыми блоками, которые могут быть слишком малы для выделения нового объекта. Существует несколько методов борьбы с фрагментацией, включая дефрагментацию и использование различных стратегий выделения памяти.
    
4. **Выделение блока:** Когда объект создается, интерпретатор Python вызывает аллокатор, чтобы выделить блок памяти под объект. Аллокатор проверяет пул памяти на наличие достаточно большого свободного блока, который может удовлетворить требованиям размера объекта.
    
5. **Заголовок и служебная информация:** Перед данными объекта обычно помещается заголовок, который содержит метаданные (например, информацию о типе объекта, счетчик ссылок и дополнительные служебные данные). Заголовок также может содержать информацию для управления памятью и сборкой мусора.
    
6. **Размещение данных объекта:** После заголовка следует размещение данных объекта, включая поля (атрибуты) объекта. Каждое поле может быть различного типа и занимать разное количество байтов.
    
7. **Метаданные для управления памятью:** Аллокаторы и система управления памятью могут добавлять дополнительные метаданные к блоку памяти, чтобы управлять блоками, отслеживать свободные блоки, определять размер и структуру объекта и другие аспекты.
    
8. **Возвращение ссылки на объект:** После успешного выделения памяти и инициализации данных объекта, аллокатор возвращает ссылку на начало блока памяти, где хранится объект. Эта ссылка может быть сохранена в переменной для дальнейшего использования.

----

## Обращение к полям

Если у родительского класса есть атрибут (поле) `name` со значением `None`, и вы создали дочерний объект и присвоили полю `name` значение `'Андрей'`, то при запросе значения поля `name` для дочернего объекта интерпретатор Python будет следовать этой последовательности действий:

1. **Поиск в объекте:** Интерпретатор будет искать атрибут `name` непосредственно в объекте дочернего класса.
    
2. **Поиск в родительском классе:** Если атрибут `name` не найден в объекте дочернего класса, интерпретатор переходит к поиску в родительском классе.
    
3. **Значение из дочернего класса:** Если атрибут `name` найден в объекте дочернего класса, интерпретатор вернет значение `'Андрей'`.
    
4. **Значение из родительского класса:** Если атрибут `name` не найден в объекте дочернего класса, интерпретатор переходит к родительскому классу. Там он находит атрибут `name`, значение которого было установлено как `None`. Это значение будет возвращено.

----
## Методы
Методы в Python хранятся в классе, а не в объекте. Методы — это функции, определенные внутри класса, и они являются частью пространства имен класса. Когда объект создается на основе класса, он наследует методы класса и может вызывать их через свою ссылку на класс.

Каждый раз, когда вы вызываете метод объекта, интерпретатор Python ищет соответствующую функцию (метод) в пространстве имен класса. Если метод найден, он вызывается с объектом, для которого был сделан вызов, переданным в качестве первого аргумента (обычно называемого `self`).

## Резюме

1. При создании объекта класса аллокатор ищет свободное место в куче необходимого для размещения объекта объема. 
2. Резервирует его, в начало помещает заголовки со служебной информацией, далее идут поля со значениями. 


