В веб-приложениях соединение  с базой данных обычно связано с запросом. Оно создается при обработке запроса и закрывается перед отправкой ответа.